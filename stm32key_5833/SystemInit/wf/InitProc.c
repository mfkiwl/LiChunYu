#include "InitProc.h"
#include "..\..\wf\ATA5833.h"
#include "..\..\..\..\WF_Device\wfDefine.h"
#include "..\..\..\..\WF_Device\stm32\wfSys.h"
#include "..\..\wf\Variables.h"
#include <stdlib.h>
#include "..\..\..\..\WF_Device\SPIROM.h"
#include "stm32l4xx_hal_flash.h"
#include "..\..\..\..\WF_Device\lcyIRDecode.h"
#include "..\..\..\..\WF_Device\lcyHash.h"
uint8_t sram[1024];
uint8_t eeprom[1024];
#ifdef ATA315
uint8_t ATA5833_eeprom[1024]=
{
	0x2A, 0x07, 0x02, 0x68, 0xDD, 0x72, 0x01, 0x97, //0x00бл07
	0x00, 0x02, 0x00, 0x00, 0x00, 0xC9, 0x2E, 0x08, //0x08бл0F
	0x03, 0x00, 0x00, 0x20, 0x01, 0x07, 0x00, 0x00, //0x10бл17
	0x03, 0x30, 0x00, 0x18, 0x00, 0x85, 0x00, 0x00, //0x18бл1F
	0x07, 0x0C, 0x0E, 0x0F, 0x0E, 0x0C, 0x09, 0x05, //0x20бл27
	0x01, 0xFC, 0xF7, 0xF3, 0xEF, 0xEB, 0xE9, 0xE8, //0x28бл2F
	0xE9, 0xEC, 0xF0, 0xF7, 0x01, 0x0D, 0x00, 0xFF, //0x30бл37
	0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, //0x38бл3F
	0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, //0x40бл47
	0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, //0x48бл4F
	0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, //0x50бл57
	0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, //0x58бл5F
	0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, //0x60бл67
	0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, //0x68бл6F
	0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, //0x70бл77
	0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, //0x78бл7F
	0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, //0x80бл87
	0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, //0x88бл8F
	0x83, 0x00, 0x00, 0x03, 0x00, 0xA7, 0x00, 0x04, //0x90бл97
	0xBF, 0x94, 0x2F, 0x02, 0x40, 0x00, 0x13, 0x00, //0x98бл9F
	0x23, 0x00, 0x13, 0x00, 0x23, 0x00, 0x03, 0x00, //0xA0блA7
	0x23, 0x00, 0x03, 0x00, 0x13, 0x00, 0x00, 0x00, //0xA8блAF
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //0xB0блB7
	0x00, 0x00, 0x00, 0x02, 0x23, 0x14, 0x63, 0x63, //0xB8блBF
	0xCA, 0xC5, 0x2A, 0x26, 0xC6, 0x28, 0x0F, 0x1F, //0xC0блC7
	0x0F, 0x1F, 0x0F, 0x0F, 0x00, 0x07, 0x2B, 0xFE, //0xC8блCF
	0x07, 0xAF, 0x01, 0xA3, 0x01, 0xAD, 0x00, 0x89, //0xD0блD7
	0x00, 0x7E, 0x00, 0xD3, 0x0A, 0x08, 0x00, 0x06, //0xD8блDF
	0x50, 0x00, 0x40, 0x00, 0x20, 0xA9, 0x0A, 0x00, //0xE0блE7
	0x00, 0xA9, 0xAA, 0xAA, 0xAA, 0x0B, 0x17, 0x0C, //0xE8блEF
	0x18, 0x2F, 0x3F, 0x0F, 0x2F, 0x00, 0xD3, 0xB2, //0xF0блF7
	0xF6, 0x60, 0x70, 0x6D, 0x04, 0x9C, 0x01, 0x7B, //0xF8блFF
	0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, //0x100бл107
	0x00, 0x00, 0xD7, 0xAA, 0x0A, 0x00, 0x00, 0xAA, //0x108бл10F
	0xAA, 0xAA, 0xAA, 0x0C, 0x16, 0x0B, 0x15, 0x1D, //0x110бл117
	0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x1D, 0x00, //0x118бл11F
	0xFF, 0xFF, 0x00, 0x00, 0x00, 0xA2, 0x2A, 0x52, //0x120бл127
	0x40, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x1D, 0x00, //0x128бл12F
	0x1D, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x10, //0x130бл137
	0x08, 0x84, 0xCC, 0x01, 0x62, 0x09, 0x84, 0xCC, //0x138бл13F
	0x01, 0x62, 0x09, 0x84, 0xCC, 0x01, 0x62, 0x09, //0x140бл147
	0x02, 0x03, 0x14, 0x42, 0x42, 0x8B, 0xCB, 0x1A, //0x148бл14F
	0x1A, 0x23, 0x23, 0x1F, 0x1F, 0x1F, 0x1F, 0x0F, //0x150бл157
	0x0C, 0x00, 0x07, 0x2B, 0x10, 0x07, 0xAF, 0x01, //0x158бл15F
	0xB0, 0x01, 0xB0, 0x01, 0x34, 0x00, 0x34, 0x00, //0x160бл167
	0x93, 0x0A, 0x00, 0x08, 0x41, 0x40, 0x5E, 0x40, //0x168бл16F
	0x11, 0x20, 0x56, 0x55, 0x55, 0x55, 0xA9, 0xAA, //0x170бл177
	0xAA, 0xAA, 0x0F, 0x11, 0x10, 0x12, 0x3F, 0x3F, //0x178бл17F
	0x2F, 0x2F, 0xCA, 0xD3, 0xB6, 0xF6, 0x60, 0x60, //0x180бл187
	0x96, 0x00, 0x9D, 0x00, 0x9D, 0x00, 0x01, 0x00, //0x188бл18F
	0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0xCA, 0xD7, //0x190бл197
	0x55, 0x55, 0x55, 0x55, 0xAA, 0xAA, 0xAA, 0xAA, //0x198бл19F
	0x0E, 0x10, 0x0D, 0x0F, 0x1D, 0x00, 0xFF, 0xFF, //0x1A0бл1A7
	0x00, 0x00, 0x00, 0x1D, 0x00, 0xFF, 0xFF, 0x00, //0x1A8бл1AF
	0x00, 0x00, 0xAA, 0x72, 0x50, 0xCF, 0x20, 0x00, //0x1B0бл1B7
	0x00, 0x00, 0x00, 0x1D, 0x00, 0x1D, 0x00, 0x00, //0x1B8бл1BF
	0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x04, 0x5F, //0x1C0бл1C7
	0x02, 0x85, 0x03, 0x55, 0x7D, 0x02, 0x85, 0x03, //0x1C8бл1CF
	0x04, 0x5F, 0x02, 0x85, 0x03, 0x02, 0x03, 0x14, //0x1D0бл1D7
	0x63, 0x63, 0x4B, 0x87, 0x25, 0x2A, 0xC6, 0x06, //0x1D8бл1DF
	0x0F, 0x1F, 0x0F, 0x1F, 0x0F, 0x0F, 0x00, 0x07, //0x1E0бл1E7
	0x23, 0x10, 0x07, 0xAF, 0x01, 0xA3, 0x01, 0xD8, //0x1E8бл1EF
	0x00, 0x89, 0x00, 0x64, 0x00, 0x93, 0x0A, 0x18, //0x1F0бл1F7
	0x00, 0x06, 0x10, 0x00, 0x40, 0x00, 0x20, 0x55, //0x1F8бл1FF
	0x55, 0x55, 0x55, 0xA9, 0xAA, 0xAA, 0xAA, 0x0B, //0x200бл207
	0x0F, 0x0C, 0x10, 0x2F, 0x3F, 0x0F, 0x2F, 0x00, //0x208бл20F
	0xD7, 0xB6, 0xF6, 0x80, 0x80, 0x96, 0x0C, 0x9C, //0x210бл217
	0x01, 0x2F, 0x01, 0x01, 0x01, 0x05, 0x05, 0x00, //0x218бл21F
	0x00, 0x00, 0x00, 0x00, 0xD7, 0xAA, 0x0A, 0x00, //0x220бл227
	0x00, 0xAA, 0xAA, 0xAA, 0xAA, 0x0C, 0x0E, 0x0B, //0x228бл22F
	0x0D, 0x1D, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, //0x230бл237
	0x1D, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x22, //0x238бл23F
	0x2A, 0x02, 0x40, 0x2F, 0x00, 0x00, 0x00, 0x00, //0x240бл247
	0x1D, 0x00, 0x1D, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, //0x248бл24F
	0x00, 0x00, 0x00, 0x04, 0x5F, 0x02, 0x85, 0x03, //0x250бл257
	0xF7, 0x71, 0x02, 0x85, 0x03, 0x04, 0x5F, 0x02, //0x258бл25F
	0x85, 0x03, 0x00, 0x04, 0x00, 0x00, 0x00, 0x3F, //0x260бл267
	0x00, 0x3F, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, //0x268бл26F
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //0x270бл277
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //0x278бл27F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x280бл287
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x288бл28F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x290бл297
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x298бл29F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2A0бл2A7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2A8бл2AF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2B0бл2B7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2B8бл2BF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2C0бл2C7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2C8бл2CF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2D0бл2D7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2D8бл2DF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2E0бл2E7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2E8бл2EF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2F0бл2F7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2F8бл2FF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x300бл307
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x308бл30F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x310бл317
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x318бл31F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x320бл327
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x328бл32F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x330бл337
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x338бл33F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x340бл347
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x348бл34F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x350бл357
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x358бл35F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x360бл367
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x368бл36F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x370бл377
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x378бл37F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x380бл387
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x388бл38F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x390бл397
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x398бл39F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3A0бл3A7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3A8бл3AF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3B0бл3B7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3B8бл3BF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3C0бл3C7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3C8бл3CF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3D0бл3D7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3D8бл3DF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3E0бл3E7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3E8бл3EF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3F0бл3F7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x77, 0x66, //0x3F8бл3FF
};
#else
uint8_t ATA5833_eeprom[1024]=
{
	0x2A, 0x07, 0x02, 0x68, 0xDD, 0x72, 0x01, 0x42, //0x00бл07
	0x00, 0x02, 0x00, 0x00, 0x00, 0xC9, 0x2E, 0x08, //0x08бл0F
	0x03, 0x00, 0x00, 0x20, 0x01, 0x07, 0x00, 0x00, //0x10бл17
	0x03, 0x30, 0x00, 0x18, 0x00, 0x85, 0x00, 0x00, //0x18бл1F
	0x07, 0x0C, 0x0E, 0x0F, 0x0E, 0x0C, 0x09, 0x05, //0x20бл27
	0x01, 0xFC, 0xF7, 0xF3, 0xEF, 0xEB, 0xE9, 0xE8, //0x28бл2F
	0xE9, 0xEC, 0xF0, 0xF7, 0x01, 0x0D, 0x00, 0xFF, //0x30бл37
	0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, //0x38бл3F
	0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, //0x40бл47
	0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, //0x48бл4F
	0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, //0x50бл57
	0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, //0x58бл5F
	0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, //0x60бл67
	0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, //0x68бл6F
	0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, //0x70бл77
	0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, //0x78бл7F
	0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0xFF, //0x80бл87
	0xFF, 0xFF, 0xFF, 0x83, 0xFF, 0xFF, 0xFF, 0xFF, //0x88бл8F
	0x83, 0x00, 0x00, 0x03, 0x00, 0xA7, 0x00, 0x04, //0x90бл97
	0xBF, 0x94, 0x2F, 0x02, 0x40, 0x00, 0x13, 0x00, //0x98бл9F
	0x23, 0x00, 0x13, 0x00, 0x23, 0x00, 0x03, 0x00, //0xA0блA7
	0x23, 0x00, 0x03, 0x00, 0x13, 0x00, 0x00, 0x00, //0xA8блAF
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //0xB0блB7
	0x00, 0x00, 0x00, 0x02, 0x03, 0x14, 0x63, 0x63, //0xB8блBF
	0xCB, 0xC5, 0x10, 0x26, 0xC6, 0x28, 0x0F, 0x1F, //0xC0блC7
	0x0F, 0x1F, 0x0F, 0x0F, 0x00, 0x07, 0x2B, 0x10, //0xC8блCF
	0x07, 0xAF, 0x01, 0xA3, 0x01, 0xAD, 0x00, 0x89, //0xD0блD7
	0x00, 0x7E, 0x00, 0x93, 0x0A, 0x08, 0x00, 0x06, //0xD8блDF
	0x50, 0x00, 0x40, 0x00, 0x20, 0xA9, 0x0A, 0x00, //0xE0блE7
	0x00, 0xA9, 0xAA, 0xAA, 0xAA, 0x0B, 0x17, 0x0C, //0xE8блEF
	0x18, 0x2F, 0x3F, 0x0F, 0x2F, 0x00, 0xD3, 0xB2, //0xF0блF7
	0xF6, 0x60, 0x70, 0x96, 0x04, 0x9C, 0x01, 0x7B, //0xF8блFF
	0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, //0x100бл107
	0x00, 0x00, 0xD7, 0xAA, 0x0A, 0x00, 0x00, 0xAA, //0x108бл10F
	0xAA, 0xAA, 0xAA, 0x0C, 0x16, 0x0B, 0x15, 0x1D, //0x110бл117
	0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x1D, 0x00, //0x118бл11F
	0xFF, 0xFF, 0x00, 0x00, 0x00, 0xA2, 0x2A, 0x52, //0x120бл127
	0x40, 0x2F, 0x00, 0x00, 0x00, 0x00, 0x1D, 0x00, //0x128бл12F
	0x1D, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x10, //0x130бл137
	0x08, 0x04, 0x5F, 0x02, 0x85, 0x03, 0x04, 0x5F, //0x138бл13F
	0x02, 0x85, 0x03, 0x04, 0x5F, 0x02, 0x85, 0x03, //0x140бл147
	0x02, 0x03, 0x14, 0x42, 0x42, 0x8B, 0xCB, 0x1A, //0x148бл14F
	0x1A, 0x23, 0x23, 0x1F, 0x1F, 0x1F, 0x1F, 0x0F, //0x150бл157
	0x0C, 0x00, 0x07, 0x2B, 0x10, 0x07, 0xAF, 0x01, //0x158бл15F
	0xB0, 0x01, 0xB0, 0x01, 0x34, 0x00, 0x34, 0x00, //0x160бл167
	0x93, 0x0A, 0x00, 0x08, 0x41, 0x40, 0x5E, 0x40, //0x168бл16F
	0x11, 0x20, 0x56, 0x55, 0x55, 0x55, 0xA9, 0xAA, //0x170бл177
	0xAA, 0xAA, 0x0F, 0x11, 0x10, 0x12, 0x3F, 0x3F, //0x178бл17F
	0x2F, 0x2F, 0xCA, 0xD3, 0xB6, 0xF6, 0x60, 0x60, //0x180бл187
	0x96, 0x00, 0x9D, 0x00, 0x9D, 0x00, 0x01, 0x00, //0x188бл18F
	0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0xCA, 0xD7, //0x190бл197
	0x55, 0x55, 0x55, 0x55, 0xAA, 0xAA, 0xAA, 0xAA, //0x198бл19F
	0x0E, 0x10, 0x0D, 0x0F, 0x1D, 0x00, 0xFF, 0xFF, //0x1A0бл1A7
	0x00, 0x00, 0x00, 0x1D, 0x00, 0xFF, 0xFF, 0x00, //0x1A8бл1AF
	0x00, 0x00, 0xAA, 0x72, 0x50, 0xCF, 0x20, 0x00, //0x1B0бл1B7
	0x00, 0x00, 0x00, 0x1D, 0x00, 0x1D, 0x00, 0x00, //0x1B8бл1BF
	0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x04, 0x5F, //0x1C0бл1C7
	0x02, 0x85, 0x03, 0x55, 0x7D, 0x02, 0x85, 0x03, //0x1C8бл1CF
	0x04, 0x5F, 0x02, 0x85, 0x03, 0x02, 0x03, 0x14, //0x1D0бл1D7
	0x63, 0x63, 0x4B, 0x87, 0x25, 0x2A, 0xC6, 0x06, //0x1D8бл1DF
	0x0F, 0x1F, 0x0F, 0x1F, 0x0F, 0x0F, 0x00, 0x07, //0x1E0бл1E7
	0x23, 0x10, 0x07, 0xAF, 0x01, 0xA3, 0x01, 0xD8, //0x1E8бл1EF
	0x00, 0x89, 0x00, 0x64, 0x00, 0x93, 0x0A, 0x18, //0x1F0бл1F7
	0x00, 0x06, 0x10, 0x00, 0x40, 0x00, 0x20, 0x55, //0x1F8бл1FF
	0x55, 0x55, 0x55, 0xA9, 0xAA, 0xAA, 0xAA, 0x0B, //0x200бл207
	0x0F, 0x0C, 0x10, 0x2F, 0x3F, 0x0F, 0x2F, 0x00, //0x208бл20F
	0xD7, 0xB6, 0xF6, 0x80, 0x80, 0x96, 0x0C, 0x9C, //0x210бл217
	0x01, 0x2F, 0x01, 0x01, 0x01, 0x05, 0x05, 0x00, //0x218бл21F
	0x00, 0x00, 0x00, 0x00, 0xD7, 0xAA, 0x0A, 0x00, //0x220бл227
	0x00, 0xAA, 0xAA, 0xAA, 0xAA, 0x0C, 0x0E, 0x0B, //0x228бл22F
	0x0D, 0x1D, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, //0x230бл237
	0x1D, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x22, //0x238бл23F
	0x2A, 0x02, 0x40, 0x2F, 0x00, 0x00, 0x00, 0x00, //0x240бл247
	0x1D, 0x00, 0x1D, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, //0x248бл24F
	0x00, 0x00, 0x00, 0x04, 0x5F, 0x02, 0x85, 0x03, //0x250бл257
	0xF7, 0x71, 0x02, 0x85, 0x03, 0x04, 0x5F, 0x02, //0x258бл25F
	0x85, 0x03, 0x00, 0x04, 0x00, 0x00, 0x00, 0x3F, //0x260бл267
	0x00, 0x3F, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, //0x268бл26F
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //0x270бл277
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //0x278бл27F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x280бл287
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x288бл28F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x290бл297
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x298бл29F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2A0бл2A7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2A8бл2AF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2B0бл2B7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2B8бл2BF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2C0бл2C7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2C8бл2CF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2D0бл2D7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2D8бл2DF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2E0бл2E7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2E8бл2EF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2F0бл2F7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x2F8бл2FF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x300бл307
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x308бл30F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x310бл317
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x318бл31F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x320бл327
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x328бл32F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x330бл337
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x338бл33F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x340бл347
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x348бл34F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x350бл357
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x358бл35F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x360бл367
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x368бл36F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x370бл377
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x378бл37F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x380бл387
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x388бл38F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x390бл397
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x398бл39F
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3A0бл3A7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3A8бл3AF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3B0бл3B7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3B8бл3BF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3C0бл3C7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3C8бл3CF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3D0бл3D7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3D8бл3DF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3E0бл3E7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3E8бл3EF
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, //0x3F0бл3F7
	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x77, 0x66, //0x3F8бл3FF

};
#endif

void ATA583X_ReadParam()
{
	uint32_t i,addr;
	for(i=0;i<1024;i++)
	{
		ATA583X_ReadSRAM(i,1,&sram[i]);
	}
	for(i=0;i<1024;i++)
	{
		eeprom[i]=ATA583X_ReadEEPROM(i);
	}
}
void ATA583X_InitEEPROM()
{
	uint32_t i,x,seed,err;
	uint32_t addr;
	uint8_t data;		
	HAL_GPIO_WritePin(LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);
	ATA583X_IDLEMode();	
	seed+=EEPSWOriginal.u32.psw1;
	seed+=EEPSWOriginal.u32.psw2;
	seed+=EEPSWOriginal.u32.psw3;
	srand(seed);
	err=0;
	for(i=0x0280;i<0x0400;i++)
	{
		ATA5833_eeprom[i]=rand();
	}
	for(i=0;i<16;i++)
		ATA5833_eeprom[EEPSWAddr+i]=EEPSW[i];
	for(i=0;i<1024;i++)
	{
		while(1)
		{			
			data=ATA5833_eeprom[i];
			ATA583X_WirteEEPROM(i,data);
			x=ATA583X_ReadEEPROM(i);
			if(x==data)
				break;
			else
			{
				err++;
				if(err>100)
				{
					ledFlash(200);
				}
				wfDelay_ms(10);
			}
		}
	}		
}
void InitEE(void)
{
	uint32_t i;
	uint8_t eedata[256];
	for(i=0;i<256;i++)
		eedata[i]=i+1;
	SPIROM_WriteArray(0,eedata,256);
	for(i=0;i<256;i++)
		eedata[i]=0;
	SPIROM_ReadArray(0,eedata,256);
	for(i=0;i<256;i++)
	{
		if(eedata[i]!=(uint8_t)(i+1))
		{
			ledFlash(100);
		}
	}


	SPIROM_WriteArray(eeprom_UpdateKey_Addr,(uint8_t*)eeprom_UpdateKey,16);
	for(i=0;i<16;i++)
		eedata[i]=0;
	SPIROM_ReadArray(eeprom_UpdateKey_Addr,eedata,16);
	for(i=0;i<16;i++)
	{
		if(eedata[i]!=(uint8_t)(i+1))
		{
			ledFlash(100);
		}
	}
}
void InitRenewTimes(void)
{
	uint32_t i;
	_RenewTimes RenewTimes;
	_RenewTimes readRenewTimes;
	for(i=0;i<8;i++)
		lcyHashIn[i]=EEPSW[i];
	lcyHashCalc(5+1);
	for(i=0;i<8;i++)
		RenewTimes.dataList[i]=lcyHashOut[i];
	STMFLASH_Write(0,&RenewTimes.data,1);
	wfFlash_ReadDoubleWords(0,&readRenewTimes.data,1);
	for(i=0;i<8;i++)
	{
		if(readRenewTimes.dataList[i]!=RenewTimes.dataList[i])
		{
			ledFlash(300);
		}
	}
}
